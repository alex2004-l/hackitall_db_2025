mutation CreateNewUser($username: String!, $email: String!) @auth(level: USER) {
  user_insert(data: {username: $username, email: $email, createdAt_expr: "request.time"})
}

query GetCurrentUserPlaySessions @auth(level: USER) {
  playSessions(where: {userId_expr: "auth.uid"}) {
    id
    game {
      title
    }
    score
    playDate
  }
}

mutation AddCommentToPlaySession($playSessionId: UUID!, $content: String!) @auth(level: USER) {
  comment_insert(data: {
    playSessionId: $playSessionId,
    userId_expr: "auth.uid",
    content: $content,
    createdAt_expr: "request.time"
  })
}

query ListGames @auth(level: PUBLIC, insecureReason: "This operation is safe to expose to the public") {
  games {
    id
    title
    description
    genre
    imageUrl
    releaseYear
  }
}